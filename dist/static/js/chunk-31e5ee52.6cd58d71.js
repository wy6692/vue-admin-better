/*!
 *  build: vue-admin-better 
 *  vue-admin-better.com 
 *  https://gitee.com/chu1204505056/vue-admin-better 
 *  time: 2024-12-28 11:59:05
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31e5ee52"],{3915:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.title,visible:t.dialogFormVisible,width:"500px"},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.close}},[e("el-form",{ref:"form",attrs:{"label-width":"80px",model:t.form,rules:t.rules}},[e("el-form-item",{attrs:{label:"标题",prop:"title"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title","string"===typeof e?e.trim():e)},expression:"form.title"}})],1),e("el-form-item",{attrs:{label:"作者",prop:"author"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.author,callback:function(e){t.$set(t.form,"author","string"===typeof e?e.trim():e)},expression:"form.author"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.close}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)},a=[],i=s("ad8f"),l={name:"TableEdit",data(){return{form:{title:"",author:""},rules:{title:[{required:!0,trigger:"blur",message:"请输入标题"}],author:[{required:!0,trigger:"blur",message:"请输入作者"}]},title:"",dialogFormVisible:!1}},created(){},methods:{showEdit(t){t?(this.title="编辑",this.form=Object.assign({},t)):this.title="添加",this.dialogFormVisible=!0},close(){this.$refs["form"].resetFields(),this.form=this.$options.data().form,this.dialogFormVisible=!1,this.$emit("fetch-data")},save(){this.$refs["form"].validate(async t=>{if(!t)return!1;{const{msg:t}=await Object(i["doEdit"])(this.form);this.$baseMessage(t,"success"),this.$refs["form"].resetFields(),this.dialogFormVisible=!1,this.$emit("fetch-data"),this.form=this.$options.data().form}})}}},r=l,n=s("426c"),u=Object(n["a"])(r,o,a,!1,null,null,null);e["default"]=u.exports},ad8f:function(t,e,s){"use strict";s.r(e),s.d(e,"getList",(function(){return a})),s.d(e,"doEdit",(function(){return i})),s.d(e,"doDelete",(function(){return l}));var o=s("b775");function a(t){return Object(o["default"])({url:"/table/getList",method:"post",data:t})}function i(t){return Object(o["default"])({url:"/table/doEdit",method:"post",data:t})}function l(t){return Object(o["default"])({url:"/table/doDelete",method:"post",data:t})}},d0b0:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"table-container"},[e("vab-query-form",[e("vab-query-form-left-panel",[e("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:t.handleAdd}},[t._v("添加")]),e("el-button",{attrs:{icon:"el-icon-delete",type:"danger"},on:{click:t.handleDelete}},[t._v("删除")]),e("el-button",{attrs:{type:"primary"},on:{click:t.testMessage}},[t._v("baseMessage")]),e("el-button",{attrs:{type:"primary"},on:{click:t.testALert}},[t._v("baseAlert")]),e("el-button",{attrs:{type:"primary"},on:{click:t.testConfirm}},[t._v("baseConfirm")]),e("el-button",{attrs:{type:"primary"},on:{click:t.testNotify}},[t._v("baseNotify")])],1),e("vab-query-form-right-panel",[e("el-form",{ref:"form",attrs:{inline:!0,model:t.queryForm},nativeOn:{submit:function(t){t.preventDefault()}}},[e("el-form-item",[e("el-input",{attrs:{placeholder:"标题"},model:{value:t.queryForm.title,callback:function(e){t.$set(t.queryForm,"title",e)},expression:"queryForm.title"}})],1),e("el-form-item",[e("el-button",{attrs:{icon:"el-icon-search","native-type":"submit",type:"primary"},on:{click:t.handleQuery}},[t._v("查询")])],1)],1)],1)],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"tableSort",attrs:{data:t.list,"element-loading-text":t.elementLoadingText,height:t.height},on:{"selection-change":t.setSelectRows,"sort-change":t.tableSortChange}},[e("el-table-column",{attrs:{"show-overflow-tooltip":"",type:"selection",width:"55"}}),e("el-table-column",{attrs:{label:"序号","show-overflow-tooltip":"",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.$index+1)+" ")]}}])}),e("el-table-column",{attrs:{label:"标题",prop:"title","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{label:"作者",prop:"author","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{label:"头像","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function({row:s}){return[t.imgShow?e("el-image",{attrs:{"preview-src-list":t.imageList,src:s.img}}):t._e()]}}])}),e("el-table-column",{attrs:{label:"点击量",prop:"pageViews","show-overflow-tooltip":"",sortable:""}}),e("el-table-column",{attrs:{label:"状态","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function({row:s}){return[e("el-tooltip",{staticClass:"item",attrs:{content:s.status,effect:"dark",placement:"top-start"}},[e("el-tag",{attrs:{type:t._f("statusFilter")(s.status)}},[t._v(" "+t._s(s.status)+" ")])],1)]}}])}),e("el-table-column",{attrs:{label:"时间",prop:"datetime","show-overflow-tooltip":"",width:"200"}}),e("el-table-column",{attrs:{label:"操作","show-overflow-tooltip":"",width:"180px"},scopedSlots:t._u([{key:"default",fn:function({row:s}){return[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.handleEdit(s)}}},[t._v("编辑")]),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.handleDelete(s)}}},[t._v("删除")])]}}])})],1),e("el-pagination",{attrs:{background:t.background,"current-page":t.queryForm.pageNo,layout:t.layout,"page-size":t.queryForm.pageSize,total:t.total},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}}),e("table-edit",{ref:"edit"})],1)},a=[],i=(s("cfff"),s("ad8f")),l=s("3915"),r={name:"ComprehensiveTable",components:{TableEdit:l["default"]},filters:{statusFilter(t){const e={published:"success",draft:"gray",deleted:"danger"};return e[t]}},data(){return{imgShow:!0,list:[],imageList:[],listLoading:!0,layout:"total, sizes, prev, pager, next, jumper",total:0,background:!0,selectRows:"",elementLoadingText:"正在加载...",queryForm:{pageNo:1,pageSize:20,title:""},timeOutID:null}},computed:{height(){return this.$baseTableHeight()}},created(){this.fetchData()},beforeDestroy(){clearTimeout(this.timeOutID)},mounted(){},methods:{tableSortChange(){const t=[];this.$refs.tableSort.tableData.forEach((e,s)=>{t.push(e.img)}),this.imageList=t},setSelectRows(t){this.selectRows=t},handleAdd(){this.$refs["edit"].showEdit()},handleEdit(t){this.$refs["edit"].showEdit(t)},handleDelete(t){if(t.id)this.$baseConfirm("你确定要删除当前项吗",null,async()=>{const{msg:e}=await Object(i["doDelete"])({ids:t.id});this.$baseMessage(e,"success"),this.fetchData()});else{if(!(this.selectRows.length>0))return this.$baseMessage("未选中任何行","error"),!1;{const t=this.selectRows.map(t=>t.id).join();this.$baseConfirm("你确定要删除选中项吗",null,async()=>{const{msg:e}=await Object(i["doDelete"])({ids:t});this.$baseMessage(e,"success"),this.fetchData()})}}},handleSizeChange(t){this.queryForm.pageSize=t,this.fetchData()},handleCurrentChange(t){this.queryForm.pageNo=t,this.fetchData()},handleQuery(){this.queryForm.pageNo=1,this.fetchData()},async fetchData(){this.listLoading=!0;const{data:t,totalCount:e}=await Object(i["getList"])(this.queryForm);this.list=t;const s=[];t.forEach((t,e)=>{s.push(t.img)}),this.imageList=s,this.total=e,this.timeOutID=setTimeout(()=>{this.listLoading=!1},500)},testMessage(){this.$baseMessage("test1","success")},testALert(){this.$baseAlert("11"),this.$baseAlert("11","自定义标题",()=>{}),this.$baseAlert("11",null,()=>{})},testConfirm(){this.$baseConfirm("你确定要执行该操作?",null,()=>{},()=>{})},testNotify(){this.$baseNotify("测试消息提示","test","success","bottom-right")}}},n=r,u=s("426c"),c=Object(u["a"])(n,o,a,!1,null,null,null);e["default"]=c.exports}}]);